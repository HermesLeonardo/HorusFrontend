<div class="admin-dashboard">

  <!-- üîπ Se√ß√£o 1: Vis√£o Geral (Cards de M√©tricas) -->
  <section class="dashboard-overview">
    <div class="dashboard-card">
      <h3>Total de Projetos</h3>
      <p>{{ totalProjetos }}</p>
    </div>
    <div class="dashboard-card">
      <h3>Total de Atividades</h3>
      <p>{{ totalAtividades }}</p>
    </div>
    <div class="dashboard-card">
      <h3>Total de Horas Lan√ßadas</h3>
      <p>{{ totalHorasLancadas }}</p>
    </div>
    <div class="dashboard-card">
      <h3>Total de Usu√°rios</h3>
      <p>{{ totalUsuarios }}</p>
    </div>
  </section>

  <!-- üîπ Se√ß√£o 2: Status Resumido dos Projetos e Atividades -->
  <section class="dashboard-project-status">
    <div class="dashboard-content"> <!-- üîπ Esse container faz o flex funcionar -->

      <!-- üîπ Gr√°fico -->
      <div class="chart-container">
        <canvas id="projetosChart"></canvas>
      </div>

      <!-- üîπ Se√ß√£o de Filtros -->
      <div class="filter-container">
        <h3>Filtros</h3>

        <!-- üîπ Filtro de Per√≠odo -->
        <label for="filtroPeriodo">Per√≠odo:</label>
        <select id="filtroPeriodo" [value]="filtroPeriodo" (change)="atualizarGrafico($event.target.value)">
          <option value="7">√öltimos 7 dias</option>
          <option value="30">√öltimos 30 dias</option>
          <option value="todos">Todos</option>
        </select>

        <!-- üîπ Alternar Tipo de Gr√°fico -->
        <button (click)="alternarTipoGrafico()">üîÑ Alternar Gr√°fico</button>

        <!-- üîπ Filtros de Status -->
        <h4>Status dos Projetos:</h4>
        <div *ngFor="let status of statusProjetos">
          <input type="checkbox" [id]="status" [(ngModel)]="statusSelecionadosProjetos[status]"
            (change)="atualizarGrafico()">
          <label [for]="status">{{ status }}</label>
        </div>

        <h4>Status das Atividades:</h4>
        <div *ngFor="let status of statusAtividades">
          <input type="checkbox" [id]="status" [(ngModel)]="statusSelecionadosAtividades[status]"
            (change)="atualizarGrafico()">
          <label [for]="status">{{ status }}</label>
        </div>
      </div>

    </div> <!-- üîπ Fim de .dashboard-content -->
  </section>


  <!-- üîπ Se√ß√£o 3: √öltimos Projetos Criados -->
  <section class="dashboard-recent-projects">
    <h2>√öltimos Projetos Criados</h2>
    <table class="dashboard-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Respons√°vel</th>
          <th>Status</th>
          <th>Data de Cria√ß√£o</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let projeto of projetosRecentes">
          <td>{{ projeto.nome }}</td>
          <td>{{ projeto.responsavel }}</td>
          <td>{{ projeto.status }}</td>
          <td>{{ projeto.dataCriacao | date:'dd/MM/yyyy' }}</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- üîπ Se√ß√£o 4: Atividades Pendentes -->
  <section class="dashboard-pending-tasks">
    <h2>Atividades Pendentes</h2>
    <table class="dashboard-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Respons√°vel</th>
          <th>Data de Vencimento</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let atividade of atividadesPendentes">
          <td>{{ atividade.nome }}</td>
          <td>{{ atividade.responsavel }}</td>
          <td>{{ atividade.dataFim | date:'dd/MM/yyyy' }}</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- üîπ Se√ß√£o 5: √öltimos Logins -->
  <section class="dashboard-last-logins">
    <h2>√öltimos Logins</h2>
    <table class="dashboard-table">
      <thead>
        <tr>
          <th>Usu√°rio</th>
          <th>Email</th>
          <th>√öltimo Login</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let usuario of ultimosLogins">
          <td>{{ usuario.nome }}</td>
          <td>{{ usuario.email }}</td>
          <td>{{ usuario.ultimoLogin | date:'dd/MM/yyyy HH:mm' }}</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- üîπ Se√ß√£o 6: A√ß√µes R√°pidas -->
  <section class="dashboard-quick-actions">
    <h2>A√ß√µes R√°pidas</h2>
    <div class="quick-actions-container">

      <button (click)="abrirDialogProjeto()">‚ûï Criar Novo Projeto</button>

      <button (click)="criarNovaAtividade()">üìå Criar Nova Atividade</button>

      <button (click)="acessarRelatorios()">üìä Acessar Relat√≥rios</button>

      <button (click)="gerenciarUsuarios()">üë§ Gerenciar Usu√°rios</button>
    </div>
  </section>


  <!-- üîπ MODAL DE CRIA√á√ÉO DE PROJETO -->
  <div class="custom-modal-overlay" *ngIf="exibirDialogProjeto">
    <div class="custom-modal">
      <h2>{{ projetoSelecionado?.id ? 'Editar Projeto' : 'Novo Projeto' }}</h2>

      <div class="modal-body">
        <label for="nome">Nome do Projeto:</label>
        <input id="nome" type="text" [(ngModel)]="projetoSelecionado.nome" placeholder="Digite o nome do projeto">

        <label for="status">Status:</label>
        <p-dropdown class="custom-dropdown" [options]="statusOptions" [(ngModel)]="projetoSelecionado.status"
          optionLabel="label" optionValue="value" 
          placeholder="Selecione o Status"
          name="status">
        </p-dropdown>

        <label for="prioridade">Prioridade:</label>
        <p-dropdown class="custom-dropdown" [options]="prioridadeOptions" [(ngModel)]="projetoSelecionado.prioridade"
          optionLabel="label" optionValue="value" 
          placeholder="Selecione a Prioridade"
          name="prioridade">
        </p-dropdown>

        <label for="descricao_projeto">Descri√ß√£o do Projeto:</label>
        <textarea id="descricao_projeto" [(ngModel)]="projetoSelecionado.descricao" rows="3"
          placeholder="Descreva o projeto"></textarea>

        <label for="usuarios">Usu√°rios Respons√°veis:</label>
        <p-multiSelect [options]="usuariosOptions" [(ngModel)]="projetoSelecionado.idUsuarioResponsavel"
          optionLabel="label" optionValue="value" 
          placeholder="Selecione os respons√°veis"
          name="usuarios">
        </p-multiSelect>

        <div class="modal-buttons">
          <button (click)="salvarProjeto()">Salvar</button>
          <button (click)="fecharDialogProjeto()">Cancelar</button>
        </div>
      </div>
    </div>
  </div>






</div>