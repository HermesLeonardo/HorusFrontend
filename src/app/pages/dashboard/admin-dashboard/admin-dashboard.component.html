<div class="admin-dashboard">

  <!-- ðŸ”¹ SeÃ§Ã£o 1: VisÃ£o Geral (Cards de MÃ©tricas) -->
  <section class="dashboard-overview">
    <div class="dashboard-card" *ngIf="userRole === 'ROLE_ADMIN'">
      <h3>Total de Projetos</h3>
      <p>{{ totalProjetos }}</p>
    </div>
    <div class="dashboard-card">
      <h3>Total de Atividades</h3>
      <p>{{ totalAtividades }}</p>
    </div>
    <div class="dashboard-card">
      <h3>Total de Horas LanÃ§adas</h3>
      <p>{{ totalHorasLancadas }}</p>
    </div>
    <div class="dashboard-card"  *ngIf="userRole === 'ROLE_ADMIN'">
      <h3>Total de UsuÃ¡rios</h3>
      <p>{{ totalUsuarios }}</p>
    </div>
  </section>

  <!-- ðŸ”¹ SeÃ§Ã£o 2: Status Resumido dos Projetos e Atividades -->
  <section class="dashboard-project-status">
    <div class="dashboard-content"> <!-- ðŸ”¹ Esse container faz o flex funcionar -->

      <!-- ðŸ”¹ GrÃ¡fico -->
      <div class="chart-container">
        <canvas id="projetosChart"></canvas>
      </div>

      <!-- ðŸ”¹ SeÃ§Ã£o de Filtros -->
      <div class="filter-container">
        <h3>Filtros</h3>

        <!-- ðŸ”¹ Filtro de PerÃ­odo -->
        <label for="filtroPeriodo">PerÃ­odo:</label>
        <select id="filtroPeriodo" [value]="filtroPeriodo" (change)="atualizarGrafico($event.target.value)">
          <option value="7">Ãšltimos 7 dias</option>
          <option value="30">Ãšltimos 30 dias</option>
          <option value="todos">Todos</option>
        </select>

        <!-- ðŸ”¹ Alternar Tipo de GrÃ¡fico -->
        <button (click)="alternarTipoGrafico()">ðŸ”„ Alternar GrÃ¡fico</button>

        <!-- ðŸ”¹ Filtros de Status -->
        <h4>Status dos Projetos:</h4>
        <div *ngFor="let status of statusProjetos">
          <input type="checkbox" [id]="status" [(ngModel)]="statusSelecionadosProjetos[status]"
            (change)="atualizarGrafico()">
          <label [for]="status">{{ status }}</label>
        </div>

        <h4>Status das Atividades:</h4>
        <div *ngFor="let status of statusAtividades">
          <input type="checkbox" [id]="status" [(ngModel)]="statusSelecionadosAtividades[status]"
            (change)="atualizarGrafico()">
          <label [for]="status">{{ status }}</label>
        </div>
      </div>

    </div> <!-- ðŸ”¹ Fim de .dashboard-content -->
  </section>


  <!-- ðŸ”¹ SeÃ§Ã£o 3: Ãšltimos Projetos Criados -->
  <section class="dashboard-recent-projects" *ngIf="userRole === 'ROLE_ADMIN'">
    <h2>Ãšltimos Projetos Criados</h2>
    <table class="dashboard-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>ResponsÃ¡vel</th>
          <th>Status</th>
          <th>Data de CriaÃ§Ã£o</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let projeto of projetosRecentes">
          <td>{{ projeto.nome }}</td>
          <td>{{ projeto.responsavel }}</td>
          <td>{{ projeto.status }}</td>
          <td>{{ projeto.dataCriacao | date:'dd/MM/yyyy' }}</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- ðŸ”¹ SeÃ§Ã£o 4: Atividades Pendentes -->
  <section class="dashboard-pending-tasks">
    <h2>Atividades Pendentes</h2>
    <table class="dashboard-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>ResponsÃ¡vel</th>
          <th>Data de Vencimento</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let atividade of atividadesPendentes">
          <td>{{ atividade.nome }}</td>
          <td>{{ atividade.responsavel }}</td>
          <td>{{ atividade.dataFim | date:'dd/MM/yyyy' }}</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- ðŸ”¹ SeÃ§Ã£o 5: Ãšltimos Logins -->
  <section class="dashboard-last-logins" *ngIf="userRole === 'ROLE_ADMIN'">
    <h2>Ãšltimos Logins</h2>
    <table class="dashboard-table">
      <thead>
        <tr>
          <th>UsuÃ¡rio</th>
          <th>Email</th>
          <th>Ãšltimo Login</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let usuario of ultimosLogins">
          <td>{{ usuario.nome }}</td>
          <td>{{ usuario.email }}</td>
          <td>{{ usuario.ultimoLogin | date:'dd/MM/yyyy HH:mm' }}</td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- ðŸ”¹ SeÃ§Ã£o 6: AÃ§Ãµes RÃ¡pidas -->
  <section class="dashboard-quick-actions" *ngIf="userRole === 'ROLE_ADMIN'">
    <h2>AÃ§Ãµes RÃ¡pidas</h2>
    <div class="quick-actions-container">
      <button (click)="abrirDialogProjeto()">âž• Criar Novo Projeto</button>
      <button (click)="criarNovaAtividade()">ðŸ“Œ Criar Nova Atividade</button>
      <button (click)="acessarRelatorios()">ðŸ“Š Acessar RelatÃ³rios</button>
      <button (click)="gerenciarUsuarios()">ðŸ‘¤ Gerenciar UsuÃ¡rios</button>
    </div>
  </section>

</div>